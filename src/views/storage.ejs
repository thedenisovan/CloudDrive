<!DOCTYPE html>
<html lang="en">
  <%- include('./partials/shared', {page: 'Storage Page'}) %>
  <body id="storage-page">
    <%- include('./partials/header', {page: 'Storage Page'}) %>
    <header id="storage-header">
      <form id="select-form" action="/storage" method="get">
        <select name="folders" onchange="this.form.submit()">
        <% folders.forEach((folder, idx) => { %>
            <option value="<%= folder.name %>" 
                <%= folder.name === (selectedFolder || folders[0].name) ? 'selected' : '' %>>
                <%= folder.name %>
            </option>
        <% }) %>
        </select>
      </form>
      <% if (selectedFolder !== 'All Files' && selectedFolder !== 'Documents' && selectedFolder !== 'Other' && selectedFolder !== 'Gif' && selectedFolder !== 'Images') { %>
        <form action="/storage" method="post">
          <input type="hidden" name="action" value="delete" />
          <input type="hidden" name="selectedFolder" value="<%= selectedFolder %>" />
          <button style="background-color: #ffe0e0;" id="del-folder"><img src="/assets/del.svg" alt="create new folder" aria-label="create new folder"></button>
        </form>
        <h1>
        </h1>
      <% } %>
      <button id="new-folder"><img src="/assets/add.svg" alt="create new folder" aria-label="create new folder"></button>
      <div id="view-container">
        <button id="grid" class="grid active"><img  src="/assets/grid.svg" ></button>
        <button class="list inactive"><img src="/assets/list.svg" ></button>
      </div>
      <a href="/upload"><button id="upload-btn" style="display: flex; align-items: center;"><img src="/assets/upload-1.svg" aria-hidden="true" width="25"><p style="font-size: 1.1rem;">Upload</p></button></a>
    </header>
    <%- include('./partials/new-folder-form.ejs') %>
    <main id="main-main">
      <h2>
      <%= (selectedFolder) %>
      </h2>
    </main>
    <%- include('./partials/footer') %>
  </body>
  <%- include('./partials/scripts/storageDom') %>
</html>
